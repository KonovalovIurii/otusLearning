<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Клиенты</title>
    <script src="https://unpkg.com/can-ndjson-stream@0.1.6/dist/global/can-ndjson-stream.js"></script>
    <script>
          function getClients() {
                fetch("http://localhost:8081/data-mono/clients/").then((response) => {
                    return can.ndjsonStream(response.body);
                }).then(dataStream => {
                    const reader = dataStream.getReader();
                    const read = result => {
                        if (result.done) {
                            return;
                        }
                        render(result.value);
                        reader.read().then(read);
                    }
                    reader.read().then(read);
                });
              }

              const render = value => {
                    const div = document.createElement('div');
                    div.append(new Date() + ' stringValue:', JSON.stringify(value));
                    document.getElementById('dataBlock').append(div);
              };
    </script>
</head>

<body  onload="getClients();">
<h4>Добавить клиента</h4>
<form action="/data-mono/clients/" method="post">
    <table border="1">
        <tr>
            <td style="width: 150px">Имя</td>
            <td style="width: 100px">Адрес</td>
            <td style="width: 100px">Телефоны</td>
        </tr>
        <tr>
            <td style="width: 50px"><input type="text" name="name" id="name" value="" placeholder="Введите имя клиента">
            </td>
            <td style="width: 100px"><input type="text" name="address" id="address" value=""
                                            placeholder="Введите адрес клиента"></td>
            <td style="width: 100px"><input type="text" name="phone" id="phone" value=""
                                            placeholder="Введите телефон клиента"></td>
        </tr>
    </table>
    <br/><br/>
    <input type="submit" value="Добавить">
</form>


<h4>Список клиентов</h4>
<div id="dataBlock"/>

</body>
</html>